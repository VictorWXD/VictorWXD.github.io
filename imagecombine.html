<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ImageCombine</title>
<style>
  body { text-align: center; margin-top: 50px; }
  #imagePreview { margin-top: 20px; }
  canvas { display: none; }
</style>
</head>
<body>

<h2>Please upload four pieces to combine into the final reward</h2>

<form id="uploadForm">
  <input type="file" id="imageUpload" accept="image/png" multiple><br>
  <button type="button" onclick="combineImages()">Upload and combine the images</button>
</form>

<div id="imagePreview"></div>

<canvas id="canvas" width="1024" height="1024"></canvas>

<script>
function combineImages() {
  const files = Array.from(document.getElementById('imageUpload').files);
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const correctNames = ['Female1.png', 'Female2.png', 'Female3.png', 'Female4.png'];
  let imagesLoaded = 0;

  // check
  if (files.length !== 4 || !files.every(file => correctNames.includes(file.name))) {
    alert('Make sure to upload four correct images');
    return;
  }

  files.sort((a, b) => correctNames.indexOf(a.name) - correctNames.indexOf(b.name));

  files.forEach((file, index) => {
    const reader = new FileReader();
    reader.onload = function(event) {
      const img = new Image();
      img.onload = function() {
        ctx.drawImage(img, 0, index * 256, 1024, 256);
        imagesLoaded++;
        if (imagesLoaded === 4) {
          const dataURL = canvas.toDataURL('image/png');
          document.getElementById('imagePreview').innerHTML = '<img src="' + dataURL + '" />';
        }
      };
      img.src = event.target.result;
    };
    reader.readAsDataURL(file);
  });
}
</script>

</body>
</html>