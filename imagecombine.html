<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>图像组合器</title>
<style>
  body { text-align: center; margin-top: 50px; }
  #imagePreview { margin-top: 20px; }
  canvas { display: none; }
</style>
</head>
<body>

<h2>上传四张图像以组合成一张1024x1024的图像</h2>

<!-- 文件上传表单 -->
<form id="uploadForm">
  <input type="file" id="female1" accept="image/png" /><br>
  <input type="file" id="female2" accept="image/png" /><br>
  <input type="file" id="female3" accept="image/png" /><br>
  <input type="file" id="female4" accept="image/png" /><br>
  <button type="button" onclick="combineImages()">组合图像</button>
</form>

<div id="imagePreview"></div>

<canvas id="canvas" width="1024" height="1024"></canvas>

<script>
function combineImages() {
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const images = [];
  let loadedImages = 0;

  // 加载图像并在canvas上绘制
  for (let i = 1; i <= 4; i++) {
    const img = document.getElementById('female' + i).files[0];
    if (img && img.name === 'Female ' + i + '.png') {
      const reader = new FileReader();
      reader.onload = function(event) {
        const image = new Image();
        image.onload = function() {
          images[i - 1] = image;
          loadedImages++;
          if (loadedImages === 4) {
            // 所有图像加载完成后，绘制到canvas上
            for (let j = 0; j < images.length; j++) {
              ctx.drawImage(images[j], 0, j * 256, 1024, 256);
            }
            // 显示组合后的图像
            const dataURL = canvas.toDataURL('image/png');
            document.getElementById('imagePreview').innerHTML = '<img src="' + dataURL + '" />';
          }
        };
        image.src = event.target.result;
      };
      reader.readAsDataURL(img);
    } else {
      alert('请上传正确命名的PNG图像文件：Female ' + i + '.png');
      return;
    }
  }
}
</script>

</body>
</html>