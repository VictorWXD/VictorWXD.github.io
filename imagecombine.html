<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>图像组合器</title>
<style>
  body { text-align: center; margin-top: 50px; }
  #imagePreview { margin-top: 20px; }
  canvas { display: none; }
</style>
</head>
<body>

<h2>上传四张图像以组合成一张1024x1024的图像</h2>

<!-- 文件上传表单 -->
<form id="uploadForm">
  <input type="file" id="imageUpload" accept="image/png" multiple><br>
  <button type="button" onclick="combineImages()">上传并组合图像</button>
</form>

<div id="imagePreview"></div>

<canvas id="canvas" width="1024" height="1024"></canvas>

<script>
function combineImages() {
  const files = Array.from(document.getElementById('imageUpload').files);
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const correctNames = ['Female1.png', 'Female2.png', 'Female3.png', 'Female4.png'];
  let imagesLoaded = 0;

  // 检查文件数量和命名
  if (files.length !== 4 || !files.every(file => correctNames.includes(file.name))) {
    alert('请确保上传四张正确命名的图像。');
    return;
  }

  // 按文件名排序
  files.sort((a, b) => correctNames.indexOf(a.name) - correctNames.indexOf(b.name));

  files.forEach((file, index) => {
    const reader = new FileReader();
    reader.onload = function(event) {
      const img = new Image();
      img.onload = function() {
        ctx.drawImage(img, 0, index * 256, 1024, 256);
        imagesLoaded++;
        if (imagesLoaded === 4) {
          const dataURL = canvas.toDataURL('image/png');
          document.getElementById('imagePreview').innerHTML = '<img src="' + dataURL + '" />';
        }
      };
      img.src = event.target.result;
    };
    reader.readAsDataURL(file);
  });
}
</script>

</body>
</html>